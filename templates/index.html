{% extends "base.html" %}

{% block content %}
<div class="main-layout">
    <!-- Â∑¶‰æßËèúÂçïÊ†è -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>Â∑•ÂÖ∑ËèúÂçï</h2>
        </div>
        
        <nav class="sidebar-nav">
            <ul class="menu-list">
                <li class="menu-item active" data-menu="gacha">
                    <span class="menu-icon">üé¥</span>
                    <span class="menu-text">ÊäΩÂç°Ê¶ÇÁéáÂ∑•ÂÖ∑</span>
                </li>
                <li class="menu-item disabled" data-menu="compare">
                    <span class="menu-icon">üìä</span>
                    <span class="menu-text">Êï∞ÂÄºÊØîÊãº</span>
                    <span class="coming-soon">ÂæÖÂºÄÂèë...</span>
                </li>
            </ul>
        </nav>
        
        <div class="sidebar-footer">
            <!-- ÊäΩÂç°Êï∞ÊçÆÊåâÈíÆÂ∑≤ÁßªËá≥Âè≥‰∏äËßí -->
        </div>
    </aside>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫ -->
    <main class="main-content">
        <!-- Âè≥‰∏äËßíÊäΩÂç°Êï∞ÊçÆÊåâÈíÆ -->
        <div class="top-actions">
            <button id="exportDataBtn" class="btn btn-export">
                üìã ÊäΩÂç°Êï∞ÊçÆ
            </button>
        </div>

        <!-- È°∂ÈÉ®Âç°Ê±†ÈÄâÊã© -->
        <section class="pool-section">
            <h3>Âç°Ê±†ÈÄâÊã©</h3>
            <div class="pool-tabs" id="poolTabs">
                {% for pool in pools %}
                <button class="pool-tab {% if current_pool and pool.pool_id == current_pool.pool_id %}active{% endif %}" 
                        data-pool-id="{{ pool.pool_id }}">
                    {{ pool.name }}
                </button>
                {% endfor %}
            </div>
            <p class="pool-desc" id="poolDesc">
                {{ current_pool.description if current_pool else 'ËØ∑ÈÄâÊã©Âç°Ê±†' }}
            </p>
        </section>

        <!-- ÊäΩÂç°Êìç‰ΩúÂå∫ -->
        <section class="pull-section">
            <div class="pull-buttons">
                <button id="pullSingle" class="btn btn-pull">ÊäΩÂç° 1 Ê¨°</button>
                <button id="pullTen" class="btn btn-pull btn-primary">ÊäΩÂç° 10 Ê¨°</button>
                <div class="custom-pull">
                    <input type="number" id="customCount" min="1" max="100000" value="100" placeholder="Ê¨°Êï∞">
                    <button id="pullCustom" class="btn btn-pull">ÊäΩÂç°</button>
                </div>
            </div>
            <button id="resetBtn" class="btn btn-reset">ÈáçÁΩÆ</button>
        </section>

        <!-- ÁªìÊûúÂ±ïÁ§∫Âå∫ -->
        <section class="result-section">
            <div class="result-container">
                <!-- Â∑¶‰æßÔºöÂç°ÁâåÂ±ïÁ§∫ -->
                <div class="card-display">
                    <h4>ÊäΩÂç°ÁªìÊûú</h4>
                    <div class="cards-grid" id="cardsGrid">
                        <p class="empty-hint">ÁÇπÂáªÊäΩÂç°ÊåâÈíÆÂºÄÂßã</p>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºöÊï∞ÊçÆÁªüËÆ° -->
                <div class="stats-display">
                    <h4>Êï∞ÊçÆÁªüËÆ°</h4>
                    
                    <!-- ÁªüËÆ°Ê¶ÇËßà -->
                    <div class="stats-overview">
                        <div class="stats-row">
                            <span class="stat-item">
                                <span class="stat-label">ÊÄªÊäΩÊï∞:</span>
                                <span class="stat-value" id="totalPulls">0</span>
                            </span>
                            <span class="stat-item ssr">
                                <span class="stat-label">SSR:</span>
                                <span class="stat-value" id="ssrCount">0</span>
                            </span>
                            <span class="stat-item sr">
                                <span class="stat-label">SR:</span>
                                <span class="stat-value" id="srCount">0</span>
                            </span>
                            <span class="stat-item r">
                                <span class="stat-label">R:</span>
                                <span class="stat-value" id="rCount">0</span>
                            </span>
                        </div>
                        <div class="stats-row rates">
                            <span class="stat-item ssr">
                                <span class="stat-label">SSRÁéá:</span>
                                <span class="stat-value" id="ssrRate">0.00%</span>
                            </span>
                            <span class="stat-item sr">
                                <span class="stat-label">SRÁéá:</span>
                                <span class="stat-value" id="srRate">0.00%</span>
                            </span>
                            <span class="stat-item r">
                                <span class="stat-label">RÁéá:</span>
                                <span class="stat-value" id="rRate">0.00%</span>
                            </span>
                        </div>
                    </div>

                    <!-- ÁâπÂÆöSSRÁªüËÆ° -->
                    <div class="featured-ssr">
                        <h5>Âç°Ê±†ÁâπÂÆöSSRËé∑Âèñ</h5>
                        <div class="featured-list" id="featuredList">
                            <p class="empty-hint">ÊöÇÊó†Êï∞ÊçÆ</p>
                        </div>
                    </div>

                    <!-- Êú¨Ê¨°ÊäΩÂç°ËØ¶ÊÉÖ -->
                    <div class="pull-details">
                        <h5>Êú¨Ê¨°ÊäΩÂç°ËØ¶ÊÉÖ</h5>
                        <div class="details-list" id="detailsList">
                            <p class="empty-hint">ÊöÇÊó†ÊäΩÂç°ËÆ∞ÂΩï</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- ÂØºÂá∫Êï∞ÊçÆÂºπÁ™ó -->
<div class="modal" id="exportModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>ÊäΩÂç°Êï∞ÊçÆ</h3>
            <button class="modal-close" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
            <textarea id="exportText" readonly></textarea>
        </div>
        <div class="modal-footer">
            <button id="copyDataBtn" class="btn btn-primary">Â§çÂà∂Êï∞ÊçÆ</button>
        </div>
    </div>
</div>
{% endblock %}
